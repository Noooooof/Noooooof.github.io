


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>  Theme |    Farewell.</title>
  <!-- 标签页图标 -->
  

  <!-- 图标库 -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
  <!-- 动画库 -->
  
  <link rel="style_animation" href="https://cdn.jsdelivr.net/gh//Noooooof/partials/CSS/animate.css"/>
  
  <!-- css文件 -->
  
<link rel="stylesheet" href="/css/white.css">

  <!-- 代码高亮 -->
  
    
      
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh//Noooooof/partials/CSS/highlight/styles/agate.css">

    
  
<meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Farewell" type="application/atom+xml">
</head>


<body>

<div class="menu-outer">
    <div class="menu-inner">
      <div class="menu-site-name  animate__animated  animate__fadeInUp">
        <a href="/">
          Farewell.
        </a>
        
      </div>
      <div class="menu-group">
        <ul class="menu-ul">
        
          <a href="/" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              HOME
            </li>
          </a>
        
          <a href="/archives" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              BLOG
            </li>
          </a>
        
          <a href="/about" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              ABOUT
            </li>
          </a>
        
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="sort">
             Tabs
             <div class="categories-outer " id="sort-div">
               <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/2020-04/">2020.04</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/2020-05/">2020.05</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/2020-06/">2020.06</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/2020-07/">2020.07</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/2020-08/">2020.08</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/2020-09/">2020.09</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/2020-10/">2020.10</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Essay/">Essay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tips/">Tips</a></li></ul>
             </div>
          </li>
        
        
        <a href="/search">
          <li class="menu-li  animate__animated  animate__fadeInUp">
            <i class="ri-search-line"></i>
          </li>
        </a>
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="mobile-menu">
            <i class="ri-menu-line"></i>
          </li>
        
        </ul>

      </div>

    </div>
</div>
<div id="mobile-main" class="animate__animated  animate__fadeIn">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-site-name animate__animated  animate__fadeInUp">
      <a href="/">
        Farewell.
      </a>
    </div>
    <div class="mobile-menu-group" id="mobile-close">
      <i class="ri-close-line"></i>
    </div>

  </div>

  <div class="mobile-menu-div">
  
    <a href="/" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>HOME</span>
      </div>
    </a>
  
    <a href="/archives" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>BLOG</span>
      </div>
    </a>
  
    <a href="/about" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>ABOUT</span>
      </div>
    </a>
  
  
    <a href="/search">  
      <div class="mobile-menu-child  animate__animated  animate__fadeInUp">
        <i class="ri-search-line"></i>
      </div>
    </a>
    
  </div>


</div>

<div class="body-outer">
  <div class="body-inner">
    
<article class="post-inner">
  <div class="post-content-outer">
    <div class="post-intro">
      <div class="post-title animate__animated  animate__fadeInUp">Theme</div>
      <div class="meta-intro animate__animated  animate__fadeInUp">Oct 19 2020</div>
      
    </div>
    <div class="post-content-inner">
      <div class="post-content-inner-space">

      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- top型目录 -->
        
        <p>White是一个非常年轻的主题，有一说一它的功能非常单一，设计更是简洁，但「刚刚够用」这一点实在太香了。所以在搭建博客的时候第一眼就选定了它，并想方设法把它打磨成我希望的样子。</p>
<p>发布者上次更新的时候添加了图片归档界面和lazyload功能，感觉和white本身的轻巧背道而驰，但后续更新还是值得期待的……直到他突然心态崩掉跑路（害</p>
<p>现在我使用的这个主题已经多少和White有所不同了，以后或许会有更大区别，想着不如记录在这里吧。</p>
<h2 id="Paginator"><a href="#Paginator" class="headerlink" title="Paginator"></a>Paginator</h2><p>White原本的翻页方式就只有archive页面的「prev」和「next」按钮。</p>
<p>我增加了archive页面的页码和post页面的前后翻页功能，然后根据页面宽度改了改显示效果。</p>
<p>实现方式有点笨，就是在ejs文件里把宽屏和窄屏的翻页部件都写出来，然后在styl文件里根据屏幕宽度选择性显示。</p>
<pre><code class="stylus">.paginator 
  display none
  @media $desktop-m
    display block

.paginator_diy
  display block
  @media $desktop-m
    display none</code></pre>
<p>stylus对格式的要求比较低，各种花括号、冒号、分号都可以省略。</p>
<p>其实还想要输入页码跳转的功能来着。</p>
<h2 id="Sort-by"><a href="#Sort-by" class="headerlink" title="Sort_by"></a>Sort_by</h2><p>我的更新以日记为主，这意味着我基本得按照日记时间降序排列；但另一方面我还经常会删改增添以前的日记，所以一定程度上也得按修改时间排序。</p>
<p>看了下hexo默认的排序文件，不太知道怎么改，所以最后还是选择改自己的post。</p>
<pre><code class="python"># coding:utf-8

import os
import re
import time

path = &#39;../_posts&#39; # _posts文件夹位置

for file in os.listdir(path):
    if (&#39;.md&#39; in file):
        fileName = os.path.join(path,file)
        with open(fileName,&#39;r&#39;,encoding=&quot;utf-8&quot;)as fi:
            postContent = fi.read() # markdown文件内容

        localDate = time.strftime(&quot;%Y-%m-%d&quot;, time.localtime()) # 当前时间
        localUpdate = time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;, time.localtime(os.stat(fileName).st_mtime)) # 文件修改时间

        postCategoris = re.search(r&#39;categories: \d*\.\d*\n&#39;,postContent)
        if (postCategoris == None):
            postCategoris = re.search(r&#39;categories: \&#39;\d*\.\d*\&#39;\n&#39;,postContent) # 非None就是日记

        postDate = re.findall(r&#39;date: ([\s\S]*?)\n&#39;,postContent)[0] # date时间
        postUpdate = re.findall(r&#39;updated: ([\s\S]*?)\n&#39;,postContent)[0] # update时间

        post = postContent # 准备覆写

        if (localDate in localUpdate): # 如果是当天修改的文件
            postUpdate = localUpdate
            post = re.sub(r&#39;updated: [\s\S]*?\n&#39;,&#39;updated: &#39;+ postUpdate +&#39;\n&#39;, post) # 更新update时间
            if (postCategoris == None):
                post = re.sub(r&#39;date: [\s\S]*?\n&#39;,&#39;date: &#39;+ postUpdate +&#39;\n&#39;, post) # 连载文章更新date时间
        else:        
            post = re.sub(r&#39;updated: [\s\S]*?\n&#39;,&#39;updated: &#39;+ postDate +&#39;\n&#39;, post) # 以前的文章按date时间复位

        with open(fileName,&#39;w&#39;,encoding=&quot;utf-8&quot;)as fo:
            fo.write(post) # 覆写</code></pre>
<p>最后的效果是把部署当天更新或修改的文章在archive页置顶标注，之前的文章则踢回原本时间线。</p>
<p>顺便把layout.ejs的修改也放上来。</p>
<pre><code class="html">&lt;% var now = moment(); %&gt;
&lt;% if (date(post.updated,&#39;YY-MM-DD&#39;)==date(now,&#39;YY-MM-DD&#39;))&#123; %&gt;
    &lt;span class=&quot;archive-post-today&quot;&gt;&lt;%= &quot;New&quot; %&gt;&lt;/span&gt;
&lt;% &#125; %&gt;</code></pre>
<p>害，可以说是相当笨拙了。</p>
<br/>

<p>ps，代码高亮待修改。</p>

        <!-- 分类文章 -->
        
          <div class="post-categoris-bottom">
            <div class="post-categoris-name">Tips</div>
            <ul class="post-categoris-list">
            
            
              
                <li>
                  
                    <span class="post-me-link"> Theme </span>
                  
                </li>
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
                <li>
                  
                    <a  href="/t20200917/" class="post-categoris-bottom-link">
                    Setting
                    
                    <span style="float: right" class="post-categoris-date"> Sep 17 </span>
                    
                    </a>
                  
                </li>
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            </ul>
          </div>
        
        <!-- 翻页 -->
        
          <div class="post-nav">
      
            <div align="right" style="float:right" class="post-nav-next">
              
                <a href="/loading/" rel="next" title="Europe">
                Europe
                </a>
                <span> > </span>
              
            </div>

            <div align="left" style="float:left" class="post-nav-prev">
                
            </div>

          </div>


          <div class="post-bot">
      
            <div align="right" style="float:right" class="post-bot-next">
              
                <a href="/loading/" rel="next" title="Europe"> Next </a>
                <span> > </span>
              
            </div>

            <div align="left" style="float:left" class="post-bot-prev">
                
            </div>

          </div>
          

                
      </div>
      <div class="post-content-inner-space">
        
          <div class="space-toc-main animate__animated  animate__fadeInUp">
            <ol class="space-toc"><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#Paginator"><span class="space-toc-text">Paginator</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#Sort-by"><span class="space-toc-text">Sort_by</span></a></li></ol>
           </div>
        
      </div>
    </div>
    <!-- 评论 -->
    
  </div>
</article>
  </div>
</div>



<!-- 如果是home模式的话，不在首页就显示footer，如果不是home模式的话 所有都显示footer -->

  <div class="footer-outer animate__animated  animate__fadeInUp">
    <div class="footer-inner">
    <div class="footer-text">
    <p>After long years.</p>

    </div>
    <div class="footer-contact">
    <ul class="footer-ul">
        
        <li class="footer-li">
            <a href="https://github.com/Noooooof" target="_blank">
                <i class="ri-github-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="https://music.163.com/#/user/home?id=94324422" target="_blank">
                <i class="ri-netease-cloud-music-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="https://space.bilibili.com/14649606" target="_blank">
                <i class="ri-bilibili-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="mailto:florehua@outlook.com" target="_blank">
                <i class="ri-mail-line"></i>
            </a>
        </li>
        
    </ul>
    </div>
    </div>
</div>






<script src="/js/white.js"></script>



    
      
<script src="https://cdn.jsdelivr.net/gh//Noooooof/partials/CSS/highlight/highlight.pack.js"></script>

      <script>hljs.initHighlightingOnLoad();</script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":155,"height":310,"position":"right","hOffset":47,"vOffset":0},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
