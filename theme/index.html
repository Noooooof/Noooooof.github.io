

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>  Theme |    Farewell.</title>
  <!-- 标签页图标 -->
  

  <!-- 图标库 -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
  <!-- 动画库 -->
  
  <link rel="style_animation" href="https://cdn.jsdelivr.net/gh//Noooooof/partials/CSS/animate.css"/>
  
  <!-- css文件 -->
  
<link rel="stylesheet" href="/css/white.css">

  <!-- 代码高亮 -->
  
    
      
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh//Noooooof/partials/CSS/highlight/styles/mono-blue.css">

    
  
<meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Farewell" type="application/atom+xml">
</head>


<body>

<div class="menu-outer">
    <div class="menu-inner">
      <div class="menu-site-name  animate__animated  animate__fadeInUp">
        <a href="/">
          Farewell.
        </a>
        
      </div>
      <div class="menu-group">
        <ul class="menu-ul">
        
          <a href="/" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              HOME
            </li>
          </a>
        
          <a href="/archives" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              BLOG
            </li>
          </a>
        
          <a href="/about" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              ABOUT
            </li>
          </a>
        
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="sort">
             Tabs
             <div class="categories-outer " id="sort-div">
               <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Diary/">Diary</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Essay/">Essay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tips/">Tips</a></li></ul>
             </div>
          </li>
        
        
        <a href="/search">
          <li class="menu-li  animate__animated  animate__fadeInUp">
            <i class="ri-search-line"></i>
          </li>
        </a>
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="mobile-menu">
            <i class="ri-menu-line"></i>
          </li>
        
        </ul>

      </div>

    </div>
</div>
<div id="mobile-main" class="animate__animated  animate__fadeIn">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-site-name animate__animated  animate__fadeInUp">
      <a href="/">
        Farewell.
      </a>
    </div>
    <div class="mobile-menu-group" id="mobile-close">
      <i class="ri-close-line"></i>
    </div>

  </div>

  <div class="mobile-menu-div">
  
    <a href="/" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>HOME</span>
      </div>
    </a>
  
    <a href="/archives" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>BLOG</span>
      </div>
    </a>
  
    <a href="/about" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>ABOUT</span>
      </div>
    </a>
  
  
    <a href="/search">  
      <div class="mobile-menu-child  animate__animated  animate__fadeInUp">
        <i class="ri-search-line"></i>
      </div>
    </a>
    
  </div>


</div>

<div class="body-outer">
  <div class="body-inner">
    <article class="post-inner">
  <div class="post-content-outer">
    <div class="post-intro">
      <div class="post-title animate__animated  animate__fadeInUp">Theme</div>
      <div class="meta-intro animate__animated  animate__fadeInUp">Oct 22 2020</div>
      
    </div>
    <div class="post-content-inner">
      <div class="post-content-inner-space">

      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- top型目录 -->
        
        <p>White是一个非常年轻的主题，有一说一它的功能非常单一，设计更是简洁，但「刚刚够用」这一点实在太香了。所以在搭建博客的时候第一眼就选定了它，并想方设法把它打磨成我希望的样子。</p>
<p>发布者上次更新的时候添加了图片归档界面和lazyload功能，感觉和White本身的轻巧背道而驰，但后续更新还是值得期待的……直到他突然心态崩掉跑路（害</p>
<p>现在我使用的这个主题已经多少和White有所不同了，以后或许会有更大区别，想着不如记录在这里吧。</p>
<h2 id="Paginator"><a href="#Paginator" class="headerlink" title="Paginator"></a>Paginator</h2><p>White原本的翻页方式就只有archive页面的「prev」和「next」按钮。</p>
<p>我增加了archive页面的页码和post页面的前后翻页功能，然后根据页面宽度改了改显示效果。</p>
<p>实现方式有点笨，就是在ejs文件里把宽屏和窄屏的翻页部件都写出来，然后在styl文件里根据屏幕宽度选择性显示。</p>
<pre><code class="stylus">.paginator 
  display none
  @media $desktop-m
    display block

.paginator_diy
  display block
  @media $desktop-m
    display none</code></pre>
<p>stylus对格式的要求比较低，各种花括号、冒号、分号都可以省略。</p>
<p>其实还想要<u>输入页码跳转</u>的功能来着。</p>
<h2 id="Sort-by"><a href="#Sort-by" class="headerlink" title="Sort_by"></a>Sort_by</h2><p>看了下hexo默认的排序文件不太知道怎么改，所以还是选择改自己的post。</p>
<p>自动更新updated有点问题，只能在编辑文本时手动修改了。</p>
<pre><code class="python"># coding:utf-8

import os
import re
import time

path = &#39;../_posts&#39; # _posts文件夹位置

for file in os.listdir(path):
    if (&#39;.md&#39; in file):
        fileName = os.path.join(path,file)
        with open(fileName,&#39;r&#39;,encoding=&quot;utf-8&quot;)as fi:
            postContent = fi.read() # markdown文件内容

        localDate = time.strftime(&quot;%Y-%m-%d&quot;, time.localtime()) # 当前时间
        localUpdate = time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;, time.localtime(os.stat(fileName).st_mtime)) # 文件修改时间

        postCategoris = re.findall(r&#39;categories: ([\s\S]*?)\n&#39;,postContent)[0] # 分类
        postDate = re.findall(r&#39;date: 2020-10-22 15:01:05
        postUpdate = re.findall(r&#39;updated: ([\s\S]*?)\n&#39;,postContent)[0] # update时间

        post = &quot;&quot; # 准备覆写

        if (localDate not in localUpdate): # 过往文章
            if (postDate != postUpdate):
                post = re.sub(r&#39;updated: [\s\S]*?\n&#39;,&#39;updated: &#39;+ postDate +&#39;\n&#39;, postContent) # 按date时间复位
        else:
            if (localDate in postUpdate): # 今日更新文章
                if ((postCategoris != &#39;Diary&#39;) and (postDate != postUpdate)):
                    post = re.sub(r&#39;date: 2020-10-22 15:01:05

        if (post):
            with open(fileName,&#39;w&#39;,encoding=&quot;utf-8&quot;)as fo:
                fo.write(post) # 覆写</code></pre>
<p>最后的效果是把部署当天更新或修改的文章在archive页置顶标注，之前的文章则踢回原本时间线。</p>
<p>顺便把<code>layout.ejs</code>的修改也放上来。</p>
<pre><code class="html">&lt;% var now = moment(); %&gt;

&lt;% if (date(post.updated,&#39;YY-MM-DD&#39;)==date(now,&#39;YY-MM-DD&#39;))&#123; %&gt;
    &lt;span class=&quot;archive-post-today&quot;&gt;&lt;%= &quot;New&quot; %&gt;&lt;/span&gt;
&lt;% &#125; %&gt;</code></pre>
<p>值得注意的是，要使它按照<code>updated</code>关键字倒序排序需要修改博客的<code>_config.yml</code>文件，添加：</p>
<pre><code class="yaml">index_generator:
  path: &#39;&#39;
  per_page: 10
  order_by: -updated
  pagination_dir: page

archive_generator:
  enabled: true
  per_page: 10
  yearly: true
  monthly: true
  daily: false
  order_by: -updated

category_generator:
  per_page: 10
  order_by: -updated

tag_generator:
  per_page: 10
  order_by: -updated</code></pre>
<p>感谢Joseph，posts按<code>-updated</code>排序需要把<code>node_modules\hexo\lib\plugins\generator\post.js</code>中<code>-date</code>改为<code>-updated</code>，这真难找（捂脸</p>
<br/>

<h2 id="List-of-posts"><a href="#List-of-posts" class="headerlink" title="List of posts"></a>List of posts</h2><p>White本身提供了把同分类的文章展示在post页面底部的功能，之前是手动把categories设置成YYYY.MM来梳理日记，但可以预见的是，如果这博客持续更新下去，这分类数量就太多了，干脆改了改让Diary分类下的文章底部只显示同月的日记。</p>
<p>但跳月份还是很麻烦，<u>果然还是想要日历云</u>。</p>
<p>然而这超出我的能力范围了（气</p>
<p>ps，如果明年我还在维护这个博客，就加上「那年今日」功能。</p>

        <!-- 分类文章 -->
        
          
            <div class="post-categoris-bottom">
              <div class="post-categoris-name">Tips</div>
              <ul class="post-categoris-list">
              
              
                
              
              
              
                
                  <li>
                    
                      <a  href="/t20201026/" class="post-categoris-bottom-link">
                      RSS
                      </a>
                    
                  </li>
                
              
              
              
                
              
              
              
                
                  <li>
                    
                      <span class="post-me-link"> Theme </span>
                    
                  </li>
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
                  <li>
                    
                      <a  href="/t20200917/" class="post-categoris-bottom-link">
                      Setting
                      </a>
                    
                  </li>
                
              
              
              
                
                  <li>
                    
                      <a  href="/t20200916/" class="post-categoris-bottom-link">
                      Font-spider
                      </a>
                    
                  </li>
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
                  <li>
                    
                      <a  href="/t20200902/" class="post-categoris-bottom-link">
                      CDN link
                      </a>
                    
                  </li>
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              
                
              
              
              </ul>
            </div>
          
        

        <!-- 日历云 -->
        <!-- 翻页 -->
        
          <div class="post-nav">
      
            <div align="right" style="float:right" class="post-nav-next">
              
                <a href="/d20201020/" rel="next" title="Little things">
                Little things
                </a>
                <span> > </span>
              
            </div>

            <div align="left" style="float:left" class="post-nav-prev">
                
                <span> < </span>
                <a href="/monster/" rel="prev" title="Monster">
                Monster
                </a>
              
            </div>

          </div>


          <div class="post-bot">
      
            <div align="right" style="float:right" class="post-bot-next">
              
                <a href="/d20201020/" rel="next" title="Little things"> Next </a>
                <span> > </span>
              
            </div>

            <div align="left" style="float:left" class="post-bot-prev">
                
                <span> < </span>
                <a href="/monster/" rel="prev" title="Monster"> Prev </a>
              
            </div>

          </div>
          

                
      </div>
      <div class="post-content-inner-space">
        
          <div class="space-toc-main animate__animated  animate__fadeInUp">
            <ol class="space-toc"><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#Paginator"><span class="space-toc-text">Paginator</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#Sort-by"><span class="space-toc-text">Sort_by</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#List-of-posts"><span class="space-toc-text">List of posts</span></a></li></ol>
           </div>
        
      </div>
    </div>
    <!-- 评论 -->
    
  </div>
</article>
  </div>
</div>



<!-- 如果是home模式的话，不在首页就显示footer，如果不是home模式的话 所有都显示footer -->

  <div class="footer-outer animate__animated  animate__fadeInUp">
    <div class="footer-inner">
    <div class="footer-text">
    <p>After long yea<a target="_blank" rel="noopener" href="http://www.noooooof.gitee.io/atom.xml">rss</a>.</p>

    </div>
    <div class="footer-contact">
    <ul class="footer-ul">
        
        <li class="footer-li">
            <a href="https://github.com/Noooooof" target="_blank">
                <i class="ri-github-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="https://music.163.com/#/user/home?id=94324422" target="_blank">
                <i class="ri-netease-cloud-music-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="https://space.bilibili.com/14649606" target="_blank">
                <i class="ri-bilibili-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="mailto:florehua@outlook.com" target="_blank">
                <i class="ri-mail-line"></i>
            </a>
        </li>
        
    </ul>
    </div>
    </div>
</div>






<script src="/js/white.js"></script>



    
      
<script src="https://cdn.jsdelivr.net/gh//Noooooof/partials/CSS/highlight/highlight.pack.js"></script>

      <script>hljs.initHighlightingOnLoad();</script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":50,"vOffset":0},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
